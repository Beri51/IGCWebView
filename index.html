<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>IGC Viewer</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="lib/leaflet/leaflet.css" />
    <link rel="stylesheet" href="lib/leaflet-awesome-markers/leaflet.awesome-markers.css" />
    <link rel="stylesheet" href="igcviewer.css" />

    <script src="lib/jquery-2.1.3.min.js"></script>
    <script src="lib/jquery.flot.min.js"></script>
    <script src="lib/jquery.flot.axislabels.js"></script>
    <script src="lib/jquery.flot.resize.min.js"></script>
    <script src="lib/jquery.flot.crosshair.js"></script>
    <script src="lib/jquery.flot.time.min.js"></script>
    <script src="lib/leaflet/leaflet.js"></script>
    <script src="lib/leaflet/Semicircle.js"></script>
    <script src="lib/leaflet-awesome-markers/leaflet.awesome-markers.min.js"></script>
    <script src="parseigc.js"></script>
    <script src="mapcontrol.js"></script>
    <script src="igcviewer.js"></script>
</head>
<body>
 <div id='titlediv'>
    <h1>JavaScript IGC Viewer</h1>

    <p>
        A free browser-based tool for viewing IGC format  tracks and barograph traces from gliding loggers.
    </p>
    <p> &copy; 2015 Alistair Malcolm Green and Richard Brisbourne </p>
</div>
    <noscript>
        <p>
            <strong>Please enable JavaScript to use this application.</strong>
        </p>
    </noscript>
    <div class="halfwidth">
      <h2> Preferences </h2>
    <p>
    <b>Warning:</b> Unless the "no airspace" option is selected below, outlines of controlled airspace  will be displayed on the map provided we have data for the area.</p>
    <p>This information may not be accurate,  current or complete and is not valid for navigation or flight planning.   Always consult the official publications for current and correct information. 
    </p>

    <div id="errorMessage">
    </div>

    <p>
        <label for="altitudeUnits">Altitude units:</label>
        <select id="altitudeUnits" autocomplete="off">
            <option value="feet">Feet</option>
            <option value="metres">Metres</option>
        </select>
        &nbsp;&nbsp; 
        <label for="airclip">Clip airspace above:</label>
        <select id="airclip" autocomplete="off">
           <option value="0">No Airspace</option>
           <option value="3001">3000</option>
            <option value="4501">4500</option>
            <option value="6001" selected>6000</option>
            <option value="9001">9000</option>
            <option value="12001">12000</option>
            <option value="19501">19500</option>
        </select>
        feet
    </p>
     <p>
        <label for="fileControl">Select a file to view:</label>
        <input id="fileControl" type="file" />
    </p>
     
     <div id="flightInfo">
    <h2> Flight Information </h2>
        <table id="headerInfo">
                 <tbody>
             <tr><th>Date:</th><td id='datecell'></td></th>
             </tbody>
            <tbody id="headers">
            </tbody>
        </table>
    </div>
    </div>
    <div class="halfwidth" id="declaration">
    <h2>Task- user entry </h2>
    <p>Fill in this section if the task declaration in the IGC file is absent or incorrect.  It will override any declaration in the file.  To use the declaration in the IGC file leave it blank.</p>
    <p>You may enter <a href="http://www.spsys.demon.co.uk/turningpoints.htm" target="_blank">BGA trigraphs</a>, six character codes for waypoints on the <a href="http://www.segelflug.de/vereine/welt2000/" target="_blank"> Welt2000 database</a>  or Lat/Long in either  'dd:mm.mmm&nbsp;N&nbsp;ddd:mm.mmm&nbsp;W' or 'dd:mm:ss&nbsp;N&nbsp;ddd:mm:ss&nbsp;W' format.  Start and finish must be filled in, blank turning points will be ignored.</p>
    <p id="requestdata">
    Start: <input type="text" id="start"/>   TP1:  <input type="text"/> TP2:  <input type="text"/> <br>
    TP3:  <input type="text"/> TP4:  <input type="text"/>   Finish: <input type="text" id="finish"/><button id="enterTask">Enter</button> <button id="clearTask">Clear</button></p>
    

<div id="task">
            <h2> Task </h2>
           <table>
           <tbody id="taskinfo">
           </tbody>
           </table>
            <p id="tasklength"></p>
        </div> 
</div>   
    <div id="igcFileDisplay" >    

        <div id="mapWrapper" class="halfwidth">
            <div id="map"></div>
            <div id="slider">
            <label for="timeSlider">Time:</label>
            <button id="timeBack">&lt;</button>
            <input type="range" id="timeSlider" step="1" value="0" min="0" max="100"/>
            <button id="timeForward">&gt;</button>
            <p id="timePositionDisplay"></p>
        </div>
        </div>
        <div id="barogram" class="halfwidth"></div>
    </div>

    <h2> Credits </h2>
     <p id="airspace_info"><b>Airspace sources:</b> <span id="airspace_src"></span></p>
     <p>Timezone data from the <a href="http://timezonedb.com">timezonedb</a> web service.</p>
    <p>
        This application was made possible by the following free software projects:
        <ul>
            <li><a href="http://www.openstreetmap.org" target="_blank">OpenStreetMap</a></li>
            <li><a href="https://jquery.com/" target="_blank">jQuery</a></li>
            <li><a href="http://leafletjs.com/" target="_blank">Leaflet.js interactive map library</a></li>
            <li><a href="http://www.flotcharts.org/" target="_blank">Flot Charts</a></li>
            <li><a href="https://github.com/markrcote/flot-axislabels" target="_blank">Flot Axis Labels plugin</a></li>
            <li>Icons by <a href="https://fortawesome.github.io/Font-Awesome/" target="_blank">Font Awesome</a></li>
        </ul>
    </p>
</body>
</html>